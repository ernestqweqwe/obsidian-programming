## 1. Парсинг HTML
### Что происходит?
Когда браузер получает HTML-файл, он начинает его обработку:
1. **Чтение байтов**: Браузер считывает сырые байты из файла.
2. **Преобразование в символы**: Эти байты преобразуются в символы на основе указанной кодировки (например, UTF-8).
3. **Токенизация**: Символы группируются в токены (например, теги `<div>`, атрибуты, текст).
4. **Построение DOM**: Токены превращаются в узлы, которые формируют дерево DOM 
---
## 2. Загрузка ресурсов
### Что происходит?
Во время парсинга HTML браузер находит ссылки на внешние ресурсы:
- **CSS**: Файлы стилей (например, `<link rel="stylesheet" href="styles.css">`).
- **JavaScript**: Скрипты (например, `<script src="script.js">`).
- **Изображения**: Теги `<img>`.
- **Шрифты**: Указанные в CSS через `@font-face`.

Браузер загружает эти ресурсы параллельно, но их влияние на рендеринг различается.
### Подробности:
- **CSS — блокирующий рендеринг**: Браузер не отобразит страницу, пока все CSS-файлы не будут загружены и обработаны.
- **JavaScript**:
  - По умолчанию тоже блокирующий, если `<script>` находится в `<head>` без атрибутов.
  - С атрибутом `async` загружается асинхронно и выполняется сразу после загрузки.
  - С атрибутом `defer` загружается асинхронно, но выполняется только после завершения парсинга HTML.
- **Изображения и шрифты**: Не блокируют рендеринг, но их загрузка может повлиять на итоговый вид страницы.
---
## 3. Парсинг CSS
### Что происходит?
После загрузки CSS браузер:
1. Преобразует текст CSS в структурированные данные.
2. Создает CSSOM (CSS Object Model — объектную модель стилей), которая представляет собой дерево стилей, связанных с узлами DOM.

---
## 4. Построение Render Tree (Дерева рендеринга)
### Что происходит?
Браузер объединяет DOM и CSSOM, создавая Render Tree (Дерево рендеринга):
- Включает только видимые элементы (например, элементы с `display: none` исключаются).
- Каждый узел дерева содержит информацию о содержимом (из DOM) и стилях (из CSSOM).

### Подробности:
- Если у элемента есть дочерние узлы, они тоже включаются в Render Tree, если видны.
- Render Tree — это "чертеж" того, что будет нарисовано на экране.

### Почему это важно?
Render Tree — промежуточный результат, необходимый для расчета позиций и отображения. Ошибки или избыточная сложность здесь замедляют рендеринг.

---

## 5. Layout (Разметка или Reflow)
### Что происходит?
Браузер вычисляет:
- **Размеры**: Ширину, высоту каждого элемента.
- **Позиции**: Где на странице будет находиться элемент.

Этот процесс также называют "reflow" (перекомпоновка).

### Подробности:
- Разметка начинается с корневого элемента (обычно `<html>`) и идет вниз по дереву.
- Сложные CSS-свойства (например, `flex`, `grid`, `position: absolute`) требуют больше вычислений.
- Изменение одного элемента (например, через JavaScript) может вызвать перерасчет всего дерева — это называется "глобальный reflow".

### Почему это важно?
Layout определяет, как страница будет выглядеть. Чем меньше вычислений, тем быстрее рендеринг.

---

## 6. Painting (Отрисовка)
### Что происходит?
Браузер преобразует Render Tree в пиксели на экране:
1. **Растрирование**: Элементы превращаются в растровые изображения.
2. **Отрисовка**: Эти изображения "рисуются" на экране.

### Подробности:
- Отрисовка выполняется по слоям (например, фон, текст, изображения).
- Сложные эффекты (тени, градиенты) увеличивают время отрисовки.
- Современные браузеры используют GPU (графический процессор) для ускорения.

### Почему это важно?
Painting — финальный визуальный шаг. Оптимизация (например, уменьшение числа элементов) снижает нагрузку на устройство.

---

## 7. Compositing (Композитинг)
### Что происходит?
Браузер делит страницу на слои, которые:
- Отрисовываются отдельно.
- Затем собираются вместе для отображения.

### Подробности:
- Слои создаются для элементов с определенными свойствами (например, `transform`, `opacity`).
- Это улучшает анимации и скроллинг, так как нужно перерисовывать только изменившиеся слои.
- Однако слишком много слоев потребляют память.

### Почему это важно?
Композитинг — это оптимизация, которая делает страницу плавной, но требует баланса ресурсов.

---

## Оптимизация Rendering Critical Path
Чтобы страница загружалась быстрее, нужно оптимизировать критический путь:
1. **Минимизация блокирующих ресурсов**:
   - Используйте `async` или `defer` для JavaScript.
   - Встройте критический CSS прямо в HTML.
2. **Оптимизация CSS**:
   - Уменьшайте размер файлов.
   - Избегайте сложных селекторов.
3. **Отложенная загрузка**:
   - Используйте `loading="lazy"` для изображений.
   - Загружайте не критические скрипты позже.
4. **Эффективный layout**:
   - Избегайте частых изменений DOM через JavaScript.
   - Используйте фиксированные размеры там, где возможно.

---

## Итог
Rendering Critical Path — это последовательность шагов: парсинг HTML, загрузка ресурсов, парсинг CSS, построение Render Tree, разметка (layout), отрисовка (painting) и композитинг. Каждый этап зависит от предыдущего, и любая задержка увеличивает время загрузки страницы. Понимание этого процесса позволяет разработчикам оптимизировать сайты, чтобы пользователи видели контент как можно быстрее.

Если у вас есть вопросы или нужно углубиться в конкретный этап — дайте знать!